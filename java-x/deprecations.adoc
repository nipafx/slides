== Deprecations
image::images/surprise.gif[background, size=cover]

=== Cleaning house

Already removed:

* RMI activation ‚ë∞ (https://openjdk.org/jeps/407[JEP 407])
* Nashorn ‚ëÆ (https://openjdk.org/jeps/372[JEP 372])
* concurrent mark sweep GC ‚ë≠ (https://openjdk.org/jeps/363[JEP 363])

=== Cleaning house

Deprecations (for removal):

* memory access via `Unsafe` „âî (https://openjdk.org/jeps/498[JEP 498])
* allowed-by-default dynamic agents „âë (https://openjdk.org/jeps/451[JEP 451])
* 32-bit x86 ports „âë„âî (JEPs https://openjdk.org/jeps/449[449], https://openjdk.org/jeps/479[479], https://openjdk.org/jeps/501[501])
* finalization ‚ë± (https://openjdk.org/jeps/421[JEP 421])
* security manager ‚ë∞„âî (JEPs https://openjdk.org/jeps/411[411], https://openjdk.org/jeps/486[486])
* applet API ‚ë∞ (https://openjdk.org/jeps/398[JEP 398])
* primitive wrapper constructors ‚ëØ (https://openjdk.org/jeps/390[JEP 390])
* biased locking ‚ëÆ (https://openjdk.org/jeps/374[JEP 374])

=== Unsafe

Methods for memory access have been superseeded +
(VarHandles via https://openjdk.org/jeps/193[JEP 193]; FFM via https://openjdk.org/jeps/454[JEP 454]).

Will be phased out:

* deprecation and compile-time warning „âì
* run-time warning „âî
* exception on invocation ~„âñ
* remove methods

=== Unsafe

You're probably not using it directly, +
but your dependencies may.

Find them with `--sun-misc-unsafe-memory-access`:

* `warn`: to get run-time warnings
* `debug`: same with more info
* `deny`: throws exception

Report and help fix!

=== Agents

What it is:

* a component that transforms byte code
* uses `java.lang.instrument` or JVM TI
* launches with JVM or attaches later ("dynamic")

=== Dynamic agents

What you need to know:

* all mechanisms for agents remain intact
* nothing changed yet
* in the future, dynamic attach will be +
  disabled by default
* enable with `-XX:+EnableDynamicAgentLoading`

=== Dynamic agents

What you need to do:

* run your app with `-XX:-EnableDynamicAgentLoading`
* observe closely
* investigate necessity of dynamic agents

=== Finalization

What it is:

* `finalize()` methods
* a JLS/GC machinery for them

=== Finalization

What you need to know:

* you can disable with `--finalization=disabled`
* in a future release, `disabled` will be the default
* in a later release, finalization will be removed

=== Finalization

What you need to do:

* search for `finalize()` in your code and +
  replace with `try`-with-resources or `Cleaner` API
* search for `finalize()` in your dependencies and +
  help remove them
* run your app with `--finalization=disabled` and +
  closely monitor resource behavior (e.g. file handles)

=== Security Manager

What it is:

* a system of checks and permissions
* intended to safeguard security-relevant +
  code sections
* embodied by `SecurityManager`

=== Security Manager

What you need to know:

* barely used but maintenance-intensive
* already disallowed by default
* enable with `java.security.manager=allow`
* in a future release, it will be removed

=== Security Manager

What you need to do:

* observe your app with default settings +
  (‚áù security manager disallowed)
* if used, move away from security manager

=== Primitive constructors

What it is:

* `new Integer(42)`
* `new Double(42)`
* etc.

=== Primitive constructors

What you need to know:

* Valhalla wants to turn them into value types
* those have no identity
* identity-based operations need to be removed

=== Primitive constructors

What you need to do:

* `Integer.valueOf(42)`
* `Double.valueOf(42)`
* etc.

=== More

* üìù all the aforementioned JEPs
* üé• https://www.youtube.com/watch?v=3HnH6G_zcP0[Future Java - Prepare Your Codebase Now!]
* üé• https://www.youtube.com/watch?v=5jIkRqBuSBs[How to Upgrade to Java 21]
